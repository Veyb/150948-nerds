function handleFeedbackPopupOpen(){storageName&&storageEmail?(nameField.value=storageName,emailField.value=storageEmail,textField.focus()):storageName&&!storageEmail?(nameField.value=storageName,emailField.focus()):!storageName&&storageEmail?(emailField.value=storageEmail,nameField.focus()):nameField.focus()}function isElementNestedInNode(a,b){return a?a===b?!0:isElementNestedInNode(a.parentNode,b):!1}var feedbackOpen=document.querySelector(".map-btn"),feedbackPopup=document.querySelector(".popup-feedback"),feedbackClose=feedbackPopup.querySelector(".popup-feedback-close"),feedbackForm=feedbackPopup.querySelector(".feedback-form"),nameField=feedbackPopup.querySelector("[name=name]"),emailField=feedbackPopup.querySelector("[name=email]"),textField=feedbackPopup.querySelector("[name=text]"),storageName=localStorage.getItem("nameField"),storageEmail=localStorage.getItem("emailField");document.body.addEventListener("click",function(a){var b=isElementNestedInNode(a.target,feedbackOpen),c=isElementNestedInNode(a.target,feedbackPopup),d=feedbackPopup.classList.contains("popup-feedback-show");return d&&!c?(a.preventDefault(),feedbackPopup.classList.remove("popup-feedback-show"),feedbackPopup.classList.remove("popup-feedback-error")):!d&&b?(a.preventDefault(),feedbackPopup.classList.add("popup-feedback-show"),handleFeedbackPopupOpen()):void 0}),feedbackClose.addEventListener("click",function(a){a.preventDefault(),feedbackPopup.classList.remove("popup-feedback-show"),feedbackPopup.classList.remove("popup-feedback-error")}),feedbackForm.addEventListener("submit",function(a){nameField.value&&emailField.value&&textField.value?(localStorage.setItem("nameField",nameField.value),localStorage.setItem("emailField",emailField.value)):(a.preventDefault(),feedbackPopup.classList.remove("popup-feedback-error"),feedbackPopup.offsetWidth=feedbackPopup.offsetWidth,feedbackPopup.classList.add("popup-feedback-error"))}),window.addEventListener("keydown",function(a){27===a.keyCode&&feedbackPopup.classList.contains("popup-feedback-show")&&(feedbackPopup.classList.remove("popup-feedback-show"),feedbackPopup.classList.remove("popup-feedback-error"))});
